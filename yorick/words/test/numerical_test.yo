#include "../src/numerical.yo"

// Global counters for test summary
test_run = 0
test_failed = 0

// Helper function to check for equality and report errors
func assert_equal(actual, expected, test_name) {
  test_run++
  if (actual != expected) {
    test_failed++
    s = swrite(format="FAILED: %s. Expected %d, but got %d.", test_name, expected, actual)
    print, s
  }
}

// Fibonacci test cases
func fibonacci_test(void) {
  assert_equal, fibonacci(-3), -1, "fibonacci(-3)"
  assert_equal, fibonacci(10), 55, "fibonacci(10)"
  assert_equal, fibonacci(15), 610, "fibonacci(15)"
}

// Factorial test cases
func factorial_test(void) {
  assert_equal, factorial(5), 120, "factorial(5)"
  assert_equal, factorial(-3), -1, "factorial(-3)"
  assert_equal, factorial(10), 3628800, "factorial(10)"
}

// GCD test cases
func gcd_test(void) {
  assert_equal, gcd(48, 18), 6, "gcd(48, 18)"
  assert_equal, gcd(100, 25), 25, "gcd(100, 25)"
  assert_equal, gcd(17, 13), 1, "gcd(17, 13)"
}

// LCM test cases
func lcm_test(void) {
  assert_equal, lcm(4, 6), 12, "lcm(4, 6)"
  assert_equal, lcm(21, 6), 42, "lcm(21, 6)"
  assert_equal, lcm(7, 3), 21, "lcm(7, 3)"
}

// Suite to run all tests
func suite_numerical(void) {
  fibonacci_test
  factorial_test
  gcd_test
  lcm_test

  print, "--- Numerical Suite Summary ---"
  s = swrite(format="PASSED: %d, FAILED: %d, Total: %d", test_run - test_failed, test_failed, test_run)
  print, s
}